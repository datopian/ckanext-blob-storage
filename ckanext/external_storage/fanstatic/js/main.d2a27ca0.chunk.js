(this.webpackJsonpdatapub=this.webpackJsonpdatapub||[]).push([[0],{127:function(e){e.exports=JSON.parse('[{"value":"utf_8","label":"UTF-8"},{"value":"iso_8859_1","label":"ISO-8859-1"},{"value":"windows_1251","label":"Windows-1251"},{"value":"windows_1252","label":"Windows-1252"},{"value":"shift_jis","label":"Shift JIS"},{"value":"gb2312","label":"GB2312"},{"value":"euc_kr","label":"EUC-KR"},{"value":"iso_8859_2","label":"ISO-8859-2"},{"value":"windows_1250","label":"Windows-1250"},{"value":"euc_jp","label":"EUC-JP"},{"value":"gbk","label":"GBK"},{"value":"big5","label":"Big5"},{"value":"iso_8859_15","label":"ISO-8859-15"},{"value":"windows_1256","label":"Windows-1256"},{"value":"iso_8859_9","label":"ISO-8859-9"}]')},128:function(e){e.exports=JSON.parse('[["PPTX","Powerpoint OOXML Presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation",[]],["EXE","Windows Executable Program","application/x-msdownload",[]],["DOC","Word Document","application/msword",[]],["KML","KML File","application/vnd.google-earth.kml+xml",[]],["XLS","Excel Document","application/vnd.ms-excel",["Excel","application/msexcel","application/x-msexcel","application/x-ms-excel","application/x-excel","application/x-dos_ms_excel","application/xls","application/x-xls"]],["WCS","Web Coverage Service","wcs",[]],["JS","JavaScript","application/x-javascript",[]],["MDB","Access Database","application/x-msaccess",[]],["NetCDF","NetCDF File","application/netcdf",[]],["ArcGIS Map Service","ArcGIS Map Service","ArcGIS Map Service",["arcgis map service"]],["TSV","Tab Separated Values File","text/tab-separated-values",["text/tsv"]],["WFS","Web Feature Service",null,[]],["WMTS","Web Map Tile Service",null,[]],["ArcGIS Online Map","ArcGIS Online Map","ArcGIS Online Map",["web map application"]],["Perl","Perl Script","text/x-perl",[]],["KMZ","KMZ File","application/vnd.google-earth.kmz+xml",["application/vnd.google-earth.kmz"]],["OWL","Web Ontology Language","application/owl+xml",[]],["N3","N3 Triples","application/x-n3",[]],["ZIP","Zip File","application/zip",["zip","http://purl.org/NET/mediatypes/application/zip"]],["GZ","Gzip File","application/gzip",["application/x-gzip"]],["QGIS","QGIS File","application/x-qgis",[]],["ODS","OpenDocument Spreadsheet","application/vnd.oasis.opendocument.spreadsheet",[]],["ODT","OpenDocument Text","application/vnd.oasis.opendocument.text",[]],["JSON","JavaScript Object Notation","application/json",[]],["BMP","Bitmap Image File","image/x-ms-bmp",[]],["HTML","Web Page","text/html",["htm","http://purl.org/net/mediatypes/text/html"]],["RAR","RAR Compressed File","application/rar",[]],["TIFF","TIFF Image File","image/tiff",[]],["ODB","OpenDocument Database","application/vnd.oasis.opendocument.database",[]],["TXT","Text File","text/plain",[]],["DCR","Adobe Shockwave format","application/x-director",[]],["ODF","OpenDocument Math Formula","application/vnd.oasis.opendocument.formula",[]],["ODG","OpenDocument Image","application/vnd.oasis.opendocument.graphics",[]],["XML","XML File","application/xml",["text/xml","http://purl.org/net/mediatypes/application/xml"]],["XLSX","Excel OOXML Spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",[]],["DOCX","Word OOXML Document","application/vnd.openxmlformats-officedocument.wordprocessingml.document",[]],["BIN","Binary Data","application/octet-stream",["bin"]],["XSLT","Extensible Stylesheet Language Transformations","application/xslt+xml",[]],["WMS","Web Mapping Service","WMS",["wms"]],["SVG","SVG vector image","image/svg+xml",["svg"]],["PPT","Powerpoint Presentation","application/vnd.ms-powerpoint",[]],["ODP","OpenDocument Presentation","application/vnd.oasis.opendocument.presentation",[]],["JPEG","JPG Image File","image/jpeg",["jpeg","jpg"]],["SPARQL","SPARQL end-point","application/sparql-results+xml",[]],["GIF","GIF Image File","image/gif",[]],["RDF","RDF","application/rdf+xml",["rdf/xml"]],["E00"," ARC/INFO interchange file format","application/x-e00",[]],["PDF","PDF File","application/pdf",[]],["CSV","Comma Separated Values File","text/csv",["text/comma-separated-values"]],["ODC","OpenDocument Chart","application/vnd.oasis.opendocument.chart",[]],["Atom Feed","Atom Feed","application/atom+xml",[]],["MrSID","MrSID","image/x-mrsid",[]],["ArcGIS Map Preview","ArcGIS Map Preview","ArcGIS Map Preview",["arcgis map preview"]],["XYZ","XYZ Chemical File","chemical/x-xyz",[]],["MOP","MOPAC Input format","chemical/x-mopac-input",[]],["Esri REST","Esri Rest API Endpoint","Esri REST",["arcgis_rest"]],["dBase","dBase Database","application/x-dbf",["dbf"]],["MXD","ESRI ArcGIS project file","application/x-mxd",[]],["TAR","TAR Compressed File","application/x-tar",[]],["PNG","PNG Image File","image/png",[]],["RSS","RSS feed","application/rss+xml",[]],["GeoJSON","Geographic JavaScript Object Notation","application/geo+json",["geojson"]],["SHP","Shapefile",null,["esri shapefile"]],["TORRENT","Torrent","application/x-bittorrent",["bittorrent"]],["ICS","iCalendar","text/calendar",["ifb","iCal"]],["GTFS","General Transit Feed Specification",null,[]],["XLSB","Excel OOXML Spreadsheet - Binary Workbook","application/vnd.ms-excel.sheet.binary.macroEnabled.12",[]],["XLSM","Excel OOXML Spreadsheet - Macro-Enabled","application/vnd.ms-excel.sheet.macroEnabled.12",[]],["XLTM","Excel OOXML Spreadsheet - Macro-Enabled Template","application/vnd.ms-excel.template.macroEnabled.12",[]],["XLAM","Excel OOXML Spreadsheet - Macro-Enabled Add-In","application/vnd.ms-excel.addin.macroEnabled.12",[]],["DOTX","Word OOXML - Template","application/vnd.openxmlformats-officedocument.wordprocessingml.template",[]],["DOCM","Word OOXML - Macro Enabled","application/vnd.ms-word.document.macroEnabled.12",[]],["DOTM","Word OOXML Template - Macro Enabled","application/vnd.ms-word.template.macroEnabled.12",[]],["XLTX","Excel OOXML Spreadsheet - Template","application/vnd.openxmlformats-officedocument.spreadsheetml.template",[]],["POTX","PowerPoint OOXML Presentation - Template","application/vnd.openxmlformats-officedocument.presentationml.template",[]],["PPSX","PowerPoint Open XML - Slide Show","application/vnd.openxmlformats-officedocument.presentationml.slideshow",[]],["PPAM","PowerPoint Open XML - Macro-Enabled Add-In","application/vnd.ms-powerpoint.addin.macroEnabled.12",[]],["PPTM","PowerPoint Open XML - Macro-Enabled","application/vnd.ms-powerpoint.presentation.macroEnabled.12",[]],["POTM","PowerPoint Open XML - Macro-Enabled Template","application/vnd.ms-powerpoint.template.macroEnabled.12",[]],["PPSM","PowerPoint Open XML - Macro-Enabled Slide Show","application/vnd.ms-powerpoint.slideshow.macroEnabled.12",[]]]')},130:function(e){e.exports=JSON.parse('{"type":["string","number","integer","boolean","object","array","date","time","datetime","year","yearmonth","duration","geopoint","geojson","any"]}')},132:function(e,a,t){e.exports=t(299)},169:function(e,a){},171:function(e,a){},204:function(e,a){},205:function(e,a){},274:function(e,a,t){},276:function(e,a,t){},277:function(e,a,t){},293:function(e,a,t){},294:function(e,a,t){},295:function(e,a,t){e.exports=t.p+"static/media/computing-cloud.ec5708b6.svg"},296:function(e,a,t){},297:function(e,a,t){},298:function(e,a,t){},299:function(e,a,t){"use strict";t.r(a),t.d(a,"ResourceEditor",(function(){return G}));var n=t(15),r=t(0),c=t.n(r),l=t(70),i=t.n(l),o=t(17),s=t(4),d=t.n(s),p=t(16),m=t(41),u=t(42),h=t(43),f=t(44),b=t(45),v=t(125),g=t(39),E=t.n(g),S=t(126),x=(t(274),t(127)),O=t(128),w=[{label:"Access Restriction",name:"restricted",input_type:"select",values:['{"level": "public"}','{"level": "private"}'],options:["Public","Private"]}],N=function(e){var a=e.metadata,t=e.handleChange,n=e.handleSubmit,r=e.uploadSuccess,l=e.isResourceEdit,i=e.deleteResource,o=e.updateResource;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"metadata-name"},a.path),c.a.createElement("form",{className:"metadata-form",onSubmit:function(e){return l?(e.preventDefault(),o(a)):n(e,0)}},c.a.createElement("div",{className:"metadata-input"},c.a.createElement("label",{className:"metadata-label",htmlFor:"title"},"Title:"),c.a.createElement("input",{className:"metadata-input__input",type:"text",name:"title",id:"title",value:a.title||a.name,onChange:t})),c.a.createElement("div",{className:"metadata-input"},c.a.createElement("label",{className:"metadata-label",htmlFor:"description"},"Description:"),c.a.createElement("input",{className:"metadata-input__input",type:"text",name:"description",id:"description",value:a.description||"",onChange:t})),c.a.createElement("div",{className:"metadata-input"},c.a.createElement("label",{className:"metadata-label",htmlFor:"encoding"},"Encoding:"),c.a.createElement("select",{className:"metadata-input__input",name:"encoding",id:"encoding",value:a.encoding||"",onChange:t,required:!0},c.a.createElement("option",{value:"",disabled:!0},"Select..."),x.map((function(e){return c.a.createElement("option",{key:"format-".concat(e.value),value:e.value},e.label)})))),c.a.createElement("div",{className:"metadata-input"},c.a.createElement("label",{className:"metadata-label",htmlFor:"format"},"Format:"),c.a.createElement("select",{className:"metadata-input__input",name:"format",id:"format",value:(a.format||"").toLowerCase(),onChange:t,required:!0},c.a.createElement("option",{value:"",disabled:!0},"Select..."),O.map((function(e){return c.a.createElement("option",{key:"format-".concat(e[0]),value:e[0].toLowerCase()},e[0])})))),w&&w.map((function(e){return c.a.createElement("div",{key:"metadata-custom-".concat(e.name),className:"metadata-input"},c.a.createElement("label",{className:"metadata-label",htmlFor:"format"},e.label,":"),c.a.createElement("select",{className:"metadata-input__input",name:e.name,id:e.name,value:a[e.name]||"",onChange:t,required:!0},c.a.createElement("option",{value:"",disabled:!0},"Select..."),e.options.map((function(a,t){return c.a.createElement("option",{key:"".concat(e.name,"-").concat(t),value:e.values[t]},a)}))))})),l?c.a.createElement("div",null,c.a.createElement("button",{type:"button",className:"btn btn-delete",onClick:i},"Delete"),c.a.createElement("button",{className:"btn"},"Update")):c.a.createElement("button",{disabled:!r,className:"metadata-btn"},"Save and Publish")))},M=t(72),_=t(129),P=t(130),y=(t(276),function(e){var a=Object(r.useState)(e.schema),t=Object(n.a)(a,2),l=t[0],i=t[1],s=c.a.useMemo((function(){return Object(M.a)(e.data)}),[]),d=l.fields.map((function(e){return{Header:e.name,accessor:e.name}})),p=c.a.useMemo((function(){return Object(M.a)(d)}),[]),m=Object(_.useTable)({columns:p,data:s}),u=m.getTableProps,h=m.getTableBodyProps,f=m.headerGroups,b=m.rows,v=m.prepareRow,g=function(e,a,t){var n=Object(o.a)({},l);n.fields[t][a]=e.target.value,i(n)},E=function(e){return"type"===e?l.fields.map((function(a,t){return c.a.createElement("td",{key:"schema-type-field-".concat(e,"-").concat(t)},c.a.createElement("select",{className:"table-tbody-select",value:a[e]||"",onChange:function(a){return g(a,e,t)}},P.type.map((function(e,a){return c.a.createElement("option",{key:"schema-type-field-option-".concat(e,"-").concat(a),value:e},e)}))))})):l.fields.map((function(a,t){return c.a.createElement("td",{key:"schema-field-".concat(e,"-").concat(t)},c.a.createElement("input",{className:"table-tbody-input",type:"text",value:a[e],onChange:function(a){return g(a,e,t)}}))}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"table-container"},c.a.createElement("div",{className:"table-schema-help"},c.a.createElement("div",{className:"table-schema-help_row"},"Title"),c.a.createElement("div",{className:"table-schema-help_row"},"Description"),c.a.createElement("div",{className:"table-schema-help_row"},"Type"),c.a.createElement("div",{className:"table-schema-help_row"},"Format")),c.a.createElement("div",{className:"table"},c.a.createElement("table",u(),c.a.createElement("thead",null,f.map((function(e){return c.a.createElement("tr",Object.assign({className:"table-thead-tr"},e.getHeaderGroupProps()),e.headers.map((function(e){return c.a.createElement("th",Object.assign({className:"table-thead-th"},e.getHeaderProps()),e.render("Header"))})))}))),c.a.createElement("tbody",h(),c.a.createElement("tr",{className:"table-tbody-tr-help"},E("title")),c.a.createElement("tr",{className:"table-tbody-tr-help"},E("description")),c.a.createElement("tr",null,E("type")),c.a.createElement("tr",null,E("format")),b.map((function(e){return v(e),c.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return c.a.createElement("td",Object.assign({},e.getCellProps(),{className:"table-tbody-td"}),e.render("Cell"))})))})))))))}),I=(t(277),function(e){return c.a.createElement("div",{className:"switch-wrapper"},c.a.createElement("div",{onClick:function(){return e.switcher("metadata")}},c.a.createElement("div",{className:"switch-number ".concat("metadata"===e.metadataOrSchema?"switch-number-selected":"switch-number-disabled")},"1"),c.a.createElement("p",{className:'switch-description "switch-description-active"}'},"Edit Metadata")),c.a.createElement("div",{onClick:function(){return e.switcher("schema")}},c.a.createElement("div",{className:"switch-number ".concat("schema"===e.metadataOrSchema?"switch-number-selected":"switch-number-disabled")},"2"),c.a.createElement("p",{className:'switch-description "switch-description-active"}'},"Edit Schema")),c.a.createElement("div",{className:"divider-line"}))}),k=t(71),C=t.n(k),F=t(131),T=t.n(F),R=(t(293),function(e){var a=Object(r.useState)(0),t=Object(n.a)(a,2),l=t[0],i=t[1],o=Object(r.useRef)(null),s=e.size,d=e.progress,p=e.strokeWidth,m=e.circleOneStroke,u=e.circleTwoStroke,h=e.timeRemaining,f=s/2,b=s/2-p/2,v=2*Math.PI*b;return Object(r.useEffect)((function(){i((100-d)/100*v),o.current.style="transition: stroke-dashoffset 850ms ease-in-out"}),[i,d,v,l]),c.a.createElement(c.a.Fragment,null,c.a.createElement("svg",{className:"svg",width:s,height:s},c.a.createElement("circle",{className:"svg-circle-bg",stroke:m,cx:f,cy:f,r:b,strokeWidth:p}),c.a.createElement("circle",{className:"svg-circle",ref:o,stroke:u,cx:f,cy:f,r:b,strokeWidth:p,strokeDasharray:v,strokeDashoffset:l}),c.a.createElement("text",{x:"".concat(f),y:"".concat(f+2),className:"svg-circle-text"},d,"%")),h>0&&c.a.createElement("span",{className:"time-remaining"},h>60?"".concat(Math.floor(h/60)," minute").concat(Math.floor(h/60)>1?"s":""):"".concat(Math.floor(h)," second").concat(h>1?"s":"")," left"))}),j=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===e)return"0 Bytes";var t=1e3,n=a<0?0:a,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,c)).toFixed(n))+" "+r[c]},D=(t(294),t(295),function(e){var a=e.onChangeHandler;return c.a.createElement("div",{className:"upload-area__drop"},c.a.createElement("input",{className:"upload-area__drop__input",type:"file",name:"file",onChange:a}),c.a.createElement("img",{className:"upload-area__drop__icon",src:"https://www.shareicon.net/data/256x256/2015/09/05/96087_cloud_512x512.png",alt:"upload-icon"}),c.a.createElement("span",{className:"upload-area__drop__text"},"Drag and drop your files",c.a.createElement("br",null),"or ",c.a.createElement("br",null),"click to select"))}),L=(t(296),function(e){var a=e.onChangeUrl;return c.a.createElement("div",{className:"upload-area__url"},c.a.createElement("label",{className:"upload-area__url__label",htmlFor:"input-url"},"URL:"),c.a.createElement("input",{className:"upload-area__url__input",id:"input-url",type:"url",name:"input-url",onBlur:a,onKeyDown:function(e){return function(e){13===e.keyCode&&e.target.blur()}(e)},placeholder:"https://www.data.com/sample.csv"}))}),X=(t(297),function(e){var a=e.onChangeUrl,t=e.onChangeHandler,l=Object(r.useState)(!1),i=Object(n.a)(l,2),o=i[0],s=i[1];return c.a.createElement("div",{className:"upload-choose"},o?c.a.createElement(c.a.Fragment,null,"file"===o&&c.a.createElement(D,{onChangeHandler:t}),"url"===o&&c.a.createElement(L,{onChangeUrl:a})):c.a.createElement("div",null,c.a.createElement("button",{className:"choose-btn",onClick:function(){return s("file")}},"Choose a file to Upload "),c.a.createElement("p",{className:"choose-text"},"OR"),c.a.createElement("button",{className:"choose-btn",onClick:function(){return s("url")}},"Link a file already online")))}),A=function(e){Object(b.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).onChangeHandler=function(){var e=Object(p.a)(d.a.mark((function e(a){var t,r,c,l,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,r=t.formattedSize,c=t.selectedFile,!(a.target.files.length>0)){e.next=23;break}return c=a.target.files[0],l=C.a.open(c),e.prev=4,e.next=7,l.rows({size:20,keyed:!0});case 7:return i=e.sent,e.next=10,T()(i);case 10:return l.descriptor.sample=e.sent,e.next=13,l.addSchema();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0);case 18:return r=j(l.size),e.next=21,l.hashSha256();case 21:o=e.sent,n.props.metadataHandler(Object.assign(l.descriptor,{hash:o}));case 23:n.setState({selectedFile:c,loaded:0,success:!1,fileExists:!1,error:!1,formattedSize:r}),n.onClickHandler();case 25:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(a){return e.apply(this,arguments)}}(),n.onUploadProgress=function(e){n.onTimeRemaining(e.loaded),n.setState({loaded:e.loaded/e.total*100})},n.onTimeRemaining=function(e){var a=e/(((new Date).getTime()-n.state.start)/1e3)/1024,t=(n.state.fileSize-e)/a;n.setState({timeRemaining:t/1e3})},n.onClickHandler=Object(p.a)(d.a.mark((function e(){var a,t,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(new Date).getTime(),t=n.state.selectedFile,r=n.props.client,c=C.a.open(t),n.setState({fileSize:c.size,start:a,loading:!0}),n.props.handleUploadStatus({loading:!0,error:!1,success:!1}),r.pushBlob(c,n.onUploadProgress).then((function(e){n.setState({success:e.success,loading:!1,fileExists:e.fileExists,loaded:100}),n.props.handleUploadStatus({loading:!1,success:e.success})})).catch((function(e){n.setState({error:!0,loading:!1}),n.props.handleUploadStatus({loading:!1,success:!1,error:!0})}));case 7:case"end":return e.stop()}}),e)}))),n.state={datasetId:e.datasetId,selectedFile:null,fileSize:0,formattedSize:"0 KB",start:"",loaded:0,success:!1,error:!1,fileExists:!1,loading:!1,timeRemaining:0},n}return Object(u.a)(t,[{key:"render",value:function(){var e=this.state,a=e.success,t=e.fileExists,n=e.error,r=e.timeRemaining,l=e.selectedFile,i=e.formattedSize;return c.a.createElement("div",{className:"upload-area"},c.a.createElement(X,{onChangeHandler:this.onChangeHandler,onChangeUrl:function(e){return console.log("Get url:",e.target.value)}}),c.a.createElement("div",{className:"upload-area__info"},l&&c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"upload-list"},c.a.createElement("li",{className:"list-item"},c.a.createElement("div",{className:"upload-list-item"},c.a.createElement("div",null,c.a.createElement("p",{className:"upload-file-name"},l.name),c.a.createElement("p",{className:"upload-file-size"},i)),c.a.createElement("div",null,c.a.createElement(R,{progress:Math.round(this.state.loaded),size:50,strokeWidth:5,circleOneStroke:"#d9edfe",circleTwoStroke:"#7ea9e1",timeRemaining:r}))))),c.a.createElement("h2",{className:"upload-message"},a&&!t&&!n&&"File uploaded successfully",t&&"File uploaded successfully",n&&"Upload failed"))))}}]),t}(c.a.Component),G=(t(298),function(e){Object(b.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).handleChangeMetadata=function(e){var a=e.target,t=a.value,r=a.name,c=n.state.resource;c[r]=t,n.setState({resource:c})},n.handleSubmitMetadata=function(){var e=Object(p.a)(d.a.mark((function e(a,t){var r,c,l,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),r=n.state,c=r.resource,l=r.client,e.next=4,n.createResource(c);case 4:return!0,e.next=8,l.action("package_show",{id:n.state.datasetId});case 8:if(i=e.sent,"draft"!=(o=i.result).state){e.next=14;break}return o.state="active",e.next=14,l.action("package_update",o);case 14:return e.abrupt("return",window.location.href="/dataset/".concat(n.state.datasetId));case 15:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),n.createResource=function(){var e=Object(p.a)(d.a.mark((function e(a){var t,r,c,l,i,s,p,m,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.client,r=n.props.config,c=r.organizationId,l=r.datasetId,i=r.resourceId,s=E.a.resourceFrictionlessToCkan(a),p=Object(o.a)({},s.sample),delete s.sample,m=s.bq_table_name?s.bq_table_name:Object(S.v4)(),u=Object(o.a)({},s,{package_id:n.state.datasetId,name:a.name||a.title,sha256:a.hash,size:a.size,lfs_prefix:"".concat(c,"/").concat(l),url:a.name,url_type:"upload",bq_table_name:(d=m,d.replace(/-/g,"")),sample:p}),!i){e.next=13;break}return u=Object(o.a)({},u,{id:i}),e.next=12,t.action("resource_update",u);case 12:return e.abrupt("return",window.location.href="/dataset/".concat(l));case 13:return e.next=15,t.action("resource_create",u).then((function(e){n.onChangeResourceId(e.result.id)}));case 15:case"end":return e.stop()}var d}),e)})));return function(a){return e.apply(this,arguments)}}(),n.deleteResource=Object(p.a)(d.a.mark((function e(){var a,t,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.state,t=a.resource,r=a.client,c=a.datasetId,!window.confirm("Are you sure to delete this resource?")){e.next=5;break}return e.next=4,r.action("resource_delete",{id:t.id});case 4:return e.abrupt("return",window.location.href="/dataset/".concat(c));case 5:case"end":return e.stop()}}),e)}))),n.switcher=function(e){var a=Object(o.a)({},n.state.ui);a.metadataOrSchema=e,n.setState({ui:a})},n.handleUploadStatus=function(e){var a=n.state.ui,t=Object(o.a)({},a,{success:e.success,error:e.error,loading:e.loading});n.setState({ui:t})},n.onChangeResourceId=function(e){n.setState({resourceId:e})},n.state={datasetId:n.props.config.datasetId,resourceId:"",resource:n.props.resource||{},ui:{fileOrLink:"",uploadComplete:void 0,success:!1,error:!1,loading:!1,metadataOrSchema:"metadata"},client:null,isResourceEdit:!1},n.metadataHandler=n.metadataHandler.bind(Object(h.a)(n)),n}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var a,t,n,r,c,l,i,o,s,p,m,u,h,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.config,t=a.authToken,n=a.api,r=a.lfs,c=a.organizationId,l=a.datasetId,i=a.resourceId,o=new v.Client("".concat(t),"".concat(c),"".concat(l),"".concat(n),"".concat(r)),!i){e.next=17;break}return e.next=6,o.action("resource_show",{id:i});case 6:return s=e.sent,e.next=9,o.action("resource_schema_show",{id:i});case 9:return p=e.sent,e.next=12,o.action("resource_sample_show",{id:i});case 12:m=e.sent,u=s.result,h=[];try{for(f in m.result)h.push(m.result[f]);u.sample=h,u.schema=p.result}catch(d){console.error(d),u.schema={fields:[]},u.sample=[]}return e.abrupt("return",this.setState({client:o,resourceId:i,resource:u,isResourceEdit:!0}));case 17:this.setState({client:o});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"metadataHandler",value:function(e){this.setState({resource:e})}},{key:"render",value:function(){var e=this.state.ui,a=e.loading,t=e.success,n=e.metadataOrSchema;return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"upload-wrapper"},c.a.createElement("div",{className:"upload-header"},c.a.createElement("h2",{className:"upload-header__title"},"Resource Editor")),c.a.createElement(A,{client:this.state.client,resource:this.state.resource,metadataHandler:this.metadataHandler,datasetId:this.state.datasetId,handleUploadStatus:this.handleUploadStatus,onChangeResourceId:this.onChangeResourceId}),c.a.createElement("div",{className:"upload-switcher"},c.a.createElement(I,{metadataOrSchema:n,switcher:this.switcher})),c.a.createElement("div",{className:"upload-edit-area"},"metadata"===n&&c.a.createElement(N,{loading:a,uploadSuccess:t,metadata:this.state.resource,handleSubmit:this.handleSubmitMetadata,handleChange:this.handleChangeMetadata,isResourceEdit:this.state.isResourceEdit,deleteResource:this.deleteResource,updateResource:this.createResource}),"schema"===n&&c.a.createElement(y,{schema:this.state.resource.schema||{fields:[]},data:this.state.resource.sample||[]}))))}}]),t}(c.a.Component));G.defaultProps={config:{authToken:"be270cae-1c77-4853-b8c1-30b6cf5e9878",api:"http://localhost:5000",lfs:"http://localhost:5001",organizationId:"myorg",datasetId:"data-test-2"}};var z=G;var B=document.getElementById("ResourceEditor");if(B){var W={datasetId:B.getAttribute("data-dataset-id"),api:B.getAttribute("data-api"),lfs:B.getAttribute("data-lfs"),authToken:B.getAttribute("data-auth-token"),organizationId:B.getAttribute("data-organization-id"),resourceId:B.getAttribute("data-resource-id")};i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(z,{config:W,resource:B.getAttribute("data-resource")})),B)}}},[[132,1,2]]]);
//# sourceMappingURL=main.d2a27ca0.chunk.js.map