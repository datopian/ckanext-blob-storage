(this["webpackJsonppublish-data"]=this["webpackJsonppublish-data"]||[]).push([[0],{116:function(e,a,t){e.exports=t.p+"static/media/computing-cloud.ec5708b6.svg"},117:function(e){e.exports=JSON.parse('[{"value":"utf_8","label":"UTF-8"},{"value":"iso_8859_1","label":"ISO-8859-1"},{"value":"windows_1251","label":"Windows-1251"},{"value":"windows_1252","label":"Windows-1252"},{"value":"shift_jis","label":"Shift JIS"},{"value":"gb2312","label":"GB2312"},{"value":"euc_kr","label":"EUC-KR"},{"value":"iso_8859_2","label":"ISO-8859-2"},{"value":"windows_1250","label":"Windows-1250"},{"value":"euc_jp","label":"EUC-JP"},{"value":"gbk","label":"GBK"},{"value":"big5","label":"Big5"},{"value":"iso_8859_15","label":"ISO-8859-15"},{"value":"windows_1256","label":"Windows-1256"},{"value":"iso_8859_9","label":"ISO-8859-9"}]')},118:function(e){e.exports=JSON.parse('[["PPTX","Powerpoint OOXML Presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation",[]],["EXE","Windows Executable Program","application/x-msdownload",[]],["DOC","Word Document","application/msword",[]],["KML","KML File","application/vnd.google-earth.kml+xml",[]],["XLS","Excel Document","application/vnd.ms-excel",["Excel","application/msexcel","application/x-msexcel","application/x-ms-excel","application/x-excel","application/x-dos_ms_excel","application/xls","application/x-xls"]],["WCS","Web Coverage Service","wcs",[]],["JS","JavaScript","application/x-javascript",[]],["MDB","Access Database","application/x-msaccess",[]],["NetCDF","NetCDF File","application/netcdf",[]],["ArcGIS Map Service","ArcGIS Map Service","ArcGIS Map Service",["arcgis map service"]],["TSV","Tab Separated Values File","text/tab-separated-values",["text/tsv"]],["WFS","Web Feature Service",null,[]],["WMTS","Web Map Tile Service",null,[]],["ArcGIS Online Map","ArcGIS Online Map","ArcGIS Online Map",["web map application"]],["Perl","Perl Script","text/x-perl",[]],["KMZ","KMZ File","application/vnd.google-earth.kmz+xml",["application/vnd.google-earth.kmz"]],["OWL","Web Ontology Language","application/owl+xml",[]],["N3","N3 Triples","application/x-n3",[]],["ZIP","Zip File","application/zip",["zip","http://purl.org/NET/mediatypes/application/zip"]],["GZ","Gzip File","application/gzip",["application/x-gzip"]],["QGIS","QGIS File","application/x-qgis",[]],["ODS","OpenDocument Spreadsheet","application/vnd.oasis.opendocument.spreadsheet",[]],["ODT","OpenDocument Text","application/vnd.oasis.opendocument.text",[]],["JSON","JavaScript Object Notation","application/json",[]],["BMP","Bitmap Image File","image/x-ms-bmp",[]],["HTML","Web Page","text/html",["htm","http://purl.org/net/mediatypes/text/html"]],["RAR","RAR Compressed File","application/rar",[]],["TIFF","TIFF Image File","image/tiff",[]],["ODB","OpenDocument Database","application/vnd.oasis.opendocument.database",[]],["TXT","Text File","text/plain",[]],["DCR","Adobe Shockwave format","application/x-director",[]],["ODF","OpenDocument Math Formula","application/vnd.oasis.opendocument.formula",[]],["ODG","OpenDocument Image","application/vnd.oasis.opendocument.graphics",[]],["XML","XML File","application/xml",["text/xml","http://purl.org/net/mediatypes/application/xml"]],["XLSX","Excel OOXML Spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",[]],["DOCX","Word OOXML Document","application/vnd.openxmlformats-officedocument.wordprocessingml.document",[]],["BIN","Binary Data","application/octet-stream",["bin"]],["XSLT","Extensible Stylesheet Language Transformations","application/xslt+xml",[]],["WMS","Web Mapping Service","WMS",["wms"]],["SVG","SVG vector image","image/svg+xml",["svg"]],["PPT","Powerpoint Presentation","application/vnd.ms-powerpoint",[]],["ODP","OpenDocument Presentation","application/vnd.oasis.opendocument.presentation",[]],["JPEG","JPG Image File","image/jpeg",["jpeg","jpg"]],["SPARQL","SPARQL end-point","application/sparql-results+xml",[]],["GIF","GIF Image File","image/gif",[]],["RDF","RDF","application/rdf+xml",["rdf/xml"]],["E00"," ARC/INFO interchange file format","application/x-e00",[]],["PDF","PDF File","application/pdf",[]],["CSV","Comma Separated Values File","text/csv",["text/comma-separated-values"]],["ODC","OpenDocument Chart","application/vnd.oasis.opendocument.chart",[]],["Atom Feed","Atom Feed","application/atom+xml",[]],["MrSID","MrSID","image/x-mrsid",[]],["ArcGIS Map Preview","ArcGIS Map Preview","ArcGIS Map Preview",["arcgis map preview"]],["XYZ","XYZ Chemical File","chemical/x-xyz",[]],["MOP","MOPAC Input format","chemical/x-mopac-input",[]],["Esri REST","Esri Rest API Endpoint","Esri REST",["arcgis_rest"]],["dBase","dBase Database","application/x-dbf",["dbf"]],["MXD","ESRI ArcGIS project file","application/x-mxd",[]],["TAR","TAR Compressed File","application/x-tar",[]],["PNG","PNG Image File","image/png",[]],["RSS","RSS feed","application/rss+xml",[]],["GeoJSON","Geographic JavaScript Object Notation","application/geo+json",["geojson"]],["SHP","Shapefile",null,["esri shapefile"]],["TORRENT","Torrent","application/x-bittorrent",["bittorrent"]],["ICS","iCalendar","text/calendar",["ifb","iCal"]],["GTFS","General Transit Feed Specification",null,[]],["XLSB","Excel OOXML Spreadsheet - Binary Workbook","application/vnd.ms-excel.sheet.binary.macroEnabled.12",[]],["XLSM","Excel OOXML Spreadsheet - Macro-Enabled","application/vnd.ms-excel.sheet.macroEnabled.12",[]],["XLTM","Excel OOXML Spreadsheet - Macro-Enabled Template","application/vnd.ms-excel.template.macroEnabled.12",[]],["XLAM","Excel OOXML Spreadsheet - Macro-Enabled Add-In","application/vnd.ms-excel.addin.macroEnabled.12",[]],["DOTX","Word OOXML - Template","application/vnd.openxmlformats-officedocument.wordprocessingml.template",[]],["DOCM","Word OOXML - Macro Enabled","application/vnd.ms-word.document.macroEnabled.12",[]],["DOTM","Word OOXML Template - Macro Enabled","application/vnd.ms-word.template.macroEnabled.12",[]],["XLTX","Excel OOXML Spreadsheet - Template","application/vnd.openxmlformats-officedocument.spreadsheetml.template",[]],["POTX","PowerPoint OOXML Presentation - Template","application/vnd.openxmlformats-officedocument.presentationml.template",[]],["PPSX","PowerPoint Open XML - Slide Show","application/vnd.openxmlformats-officedocument.presentationml.slideshow",[]],["PPAM","PowerPoint Open XML - Macro-Enabled Add-In","application/vnd.ms-powerpoint.addin.macroEnabled.12",[]],["PPTM","PowerPoint Open XML - Macro-Enabled","application/vnd.ms-powerpoint.presentation.macroEnabled.12",[]],["POTM","PowerPoint Open XML - Macro-Enabled Template","application/vnd.ms-powerpoint.template.macroEnabled.12",[]],["PPSM","PowerPoint Open XML - Macro-Enabled Slide Show","application/vnd.ms-powerpoint.slideshow.macroEnabled.12",[]]]')},120:function(e){e.exports=JSON.parse('{"type":["string","number","integer","boolean","object","array","date","time","datetime","year","yearmonth","duration","geopoint","geojson","any"]}')},123:function(e,a,t){e.exports=t(262)},128:function(e,a,t){},155:function(e,a){},157:function(e,a){},190:function(e,a){},191:function(e,a){},257:function(e,a,t){},258:function(e,a,t){},259:function(e,a,t){},261:function(e,a,t){},262:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),i=t(113),o=t.n(i),c=(t(128),t(35)),r=t(59),s=t(13),p=t.n(s),m=t(60),d=t(114),u=t(115),h=t(121),f=t(122),g=t(38),b=t(116),v=t.n(b),E=t(37),S=(t(257),function(e){var a=Object(n.useState)(0),t=Object(E.a)(a,2),i=t[0],o=t[1],c=Object(n.useRef)(null),r=e.size,s=e.progress,p=e.strokeWidth,m=e.circleOneStroke,d=e.circleTwoStroke,u=e.timeRemaining,h=r/2,f=r/2-p/2,g=2*Math.PI*f;return Object(n.useEffect)((function(){o((100-s)/100*g),c.current.style="transition: stroke-dashoffset 850ms ease-in-out"}),[o,s,g,i]),l.a.createElement(l.a.Fragment,null,l.a.createElement("svg",{className:"svg",width:r,height:r},l.a.createElement("circle",{className:"svg-circle-bg",stroke:m,cx:h,cy:h,r:f,strokeWidth:p}),l.a.createElement("circle",{className:"svg-circle",ref:c,stroke:d,cx:h,cy:h,r:f,strokeWidth:p,strokeDasharray:g,strokeDashoffset:i}),l.a.createElement("text",{x:"".concat(h),y:"".concat(h+2),className:"svg-circle-text"},s,"%")),u>0&&l.a.createElement("span",{className:"time-remaining"},u>60?"".concat(Math.floor(u/60)," minute").concat(Math.floor(u/60)>1?"s":""):"".concat(Math.floor(u)," second").concat(u>1?"s":"")," left"))}),x=(t(258),t(117)),O=t(118),M=function(e){var a=e.metadata,t=e.handleChange,n=e.handleSubmit,i=e.uploadSuccess;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"metadata-name"},a.path),l.a.createElement("form",{className:"metadata-form",onSubmit:n},l.a.createElement("div",{className:"metadata-input"},l.a.createElement("label",{className:"metadata-label",htmlFor:"title"},"Title:"),l.a.createElement("input",{className:"metadata-input__input",type:"text",name:"title",id:"title",value:a.title,onChange:t})),l.a.createElement("div",{className:"metadata-input"},l.a.createElement("label",{className:"metadata-label",htmlFor:"description"},"Description:"),l.a.createElement("input",{className:"metadata-input__input",type:"text",name:"description",id:"description",value:a.description,onChange:t})),l.a.createElement("div",{className:"metadata-input"},l.a.createElement("label",{className:"metadata-label",htmlFor:"encoding"},"Encoding:"),l.a.createElement("select",{className:"metadata-input__input",name:"encoding",id:"encoding",value:a.encoding||"",onChange:t},l.a.createElement("option",{value:"",disabled:!0},"Encode"),x.map((function(e){return l.a.createElement("option",{key:"format-".concat(e.value),value:e.value},e.label)})))),l.a.createElement("div",{className:"metadata-input"},l.a.createElement("label",{className:"metadata-label",htmlFor:"format"},"Format:"),l.a.createElement("select",{className:"metadata-input__input",value:a.format||"",onChange:t},O.map((function(e){return l.a.createElement("option",{key:"format-".concat(e[0]),value:e[0].toLowerCase()},e[0])})))),l.a.createElement("input",{disabled:!i,className:"metadata-btn",type:"submit",value:"Save Metadata"})))},N=(t(259),function(e){return l.a.createElement("div",{className:"step-wrapper"},e.steps.map((function(a,t){return l.a.createElement("div",{onClick:function(){return e.onChangeStep(t+1)},key:"stepper-".concat(a.class)},l.a.createElement("div",{className:"step-number ".concat(a.class," ").concat(e.currentStep===a.stepNumber?"step-number-selected":"step-number-disabled")},a.completed?l.a.createElement("span",null,"\u2713"):a.stepNumber),l.a.createElement("p",{className:'step-description "step-description-active"}'},a.description))})),l.a.createElement("div",{className:"divider-line"}))}),w=t(39),F=t(119),y=t(120),P=(t(261),function(e){var a=Object(n.useState)(e.schema.fields),t=Object(E.a)(a,2),i=t[0],o=t[1],c=l.a.useMemo((function(){return Object(w.a)(e.data)}),[]),r=e.schema.fields.map((function(e){return{Header:e.name,accessor:e.name}})),s=l.a.useMemo((function(){return Object(w.a)(r)}),[]),p=Object(F.useTable)({columns:s,data:c}),m=p.getTableProps,d=p.getTableBodyProps,u=p.headerGroups,h=p.rows,f=p.prepareRow,g=function(e,a,t){var n=Object(w.a)(i);n[t][a]=e.target.value,o(n)},b=function(e){return"type"===e?i.map((function(a,t){return l.a.createElement("td",{key:"schema-type-field-".concat(e,"-").concat(t)},l.a.createElement("select",{className:"table-tbody-select",value:a[e]||"",onChange:function(a){return g(a,e,t)}},y.type.map((function(e,a){return l.a.createElement("option",{key:"schema-type-field-option-".concat(e,"-").concat(a),value:e},e)}))))})):i.map((function(a,t){return l.a.createElement("td",{key:"schema-field-".concat(e,"-").concat(t)},l.a.createElement("input",{className:"table-tbody-input",type:"text",value:a[e],onChange:function(a){return g(a,e,t)}}))}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"table-container"},l.a.createElement("div",{className:"table-schema-help"},l.a.createElement("div",{className:"table-schema-help_row"},"Title"),l.a.createElement("div",{className:"table-schema-help_row"},"Description"),l.a.createElement("div",{className:"table-schema-help_row"},"Type"),l.a.createElement("div",{className:"table-schema-help_row"},"Format"),l.a.createElement("button",{className:"table-btn-save",disabled:!e.uploadSuccess,onClick:function(){return console.log("Save schema:",i)}},"Save")),l.a.createElement("div",{className:"table"},l.a.createElement("table",m(),l.a.createElement("thead",null,u.map((function(e){return l.a.createElement("tr",Object.assign({className:"table-thead-tr"},e.getHeaderGroupProps()),e.headers.map((function(e){return l.a.createElement("th",Object.assign({className:"table-thead-th"},e.getHeaderProps()),e.render("Header"))})))}))),l.a.createElement("tbody",d(),l.a.createElement("tr",{className:"table-tbody-tr-help"},b("title")),l.a.createElement("tr",{className:"table-tbody-tr-help"},b("description")),l.a.createElement("tr",null,b("type")),l.a.createElement("tr",null,b("format")),h.map((function(e){return f(e),l.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return l.a.createElement("td",Object.assign({},e.getCellProps(),{className:"table-tbody-td"}),e.render("Cell"))})))})))))))}),T=function(e){Object(f.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).onChangeHandler=function(){var e=Object(m.a)(p.a.mark((function e(a){var t,l,i,o,c,r,s,m,d,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,l=t.formattedSize,i=t.metadata,o=t.selectedFile,c=i.name,r=i.title,s=i.path,m=i.hash,d=i.format,!(a.target.files.length>0)){e.next=13;break}return l=n.onFormatBytes(a.target.files[0].size),d=n.getFileExtension(a.target.files[0].name),r=n.onFormatTitle(a.target.files[0].name),c=n.onFormatName(a.target.files[0].name),s=a.target.files[0].name,o=a.target.files[0],u=new g.FileAPI.HTML5File(o),e.next=12,u.sha256();case 12:m=e.sent;case 13:n.setState({selectedFile:o,loaded:0,success:!1,error:!1,formattedSize:l,metadata:{name:c,path:s,title:r,encoding:"",description:"",format:d,bytes:o.size,mediatype:o.type,hash:"SHA256:".concat(m)}}),n.onClickHandler();case 15:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.onUploadProgress=function(e){n.onTimeRemaining(e.loaded),n.setState({loaded:e.loaded/e.total*100})},n.onTimeRemaining=function(e){var a=e/(((new Date).getTime()-n.state.start)/1e3)/1024,t=(n.state.fileSize-e)/a;n.setState({timeRemaining:t/1e3})},n.onFormatBytes=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===e)return"0 Bytes";var t=1e3,n=a<0?0:a,l=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,i)).toFixed(n))+" "+l[i]},n.onClickHandler=Object(m.a)(p.a.mark((function e(){var a,t,l,i,o,c,s,m,d,u,h,f,b,v;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(new Date).getTime(),t=n.state,l=t.selectedFile,i=t.metadata,o=n.props,c=o.scopes,s=o.config,m=o.authzUrl,d=s.authToken,u=s.api,h=s.organizationId,f=s.datasetId,b=new g.FileAPI.HTML5File(l),v=new g.Uploader("".concat(d),"".concat(h),"".concat(f),"".concat(u)),n.setState({metadata:Object(r.a)({},i),fileSize:b.size(),start:a,loading:!0}),fetch("".concat(m),{method:"POST",headers:{"Content-Type":"application/json",Authorization:d},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){return v.push(b,e.result.token,n.onUploadProgress)})).then((function(e){return n.setState({success:e.success,loading:!1})})).catch((function(e){return n.setState({error:!0,loading:!1})}));case 8:case"end":return e.stop()}}),e)}))),n.getFileExtension=function(e){return/[.]/.exec(e)?/[^.]+$/.exec(e)[0]:void 0},n.onFormatTitle=function(e){return e.replace(/\.[^/.]+$/,"").replace(/_/g," ").replace(/-/g," ")},n.onFormatName=function(e){return e.replace(/\.[^/.]+$/,"")},n.handleChangeMetadata=function(e){var a=e.target,t=a.value,l=a.name,i=n.state.metadata;n.setState({metadata:Object(r.a)({},i,Object(c.a)({},l,t))})},n.handleSubmitMetadata=function(e){console.log("Test: ",n.state.metadata),e.preventDefault()},n.onChangeStep=function(e){n.setState({currentStep:e})},n.state={selectedFile:null,fileSize:0,formattedSize:"0 KB",metadata:{name:"",path:"",title:"",encoding:"",description:"",format:"",bytes:0,mediatype:"",hash:""},start:"",loaded:0,success:!1,error:!1,loading:!1,timeRemaining:0,currentStep:1,steps:[{class:"step-one",stepNumber:1,description:"Edit Metadata",completed:!1},{class:"step-two",stepNumber:2,description:"Edit Schema",completed:!1}]},n}return Object(u.a)(t,[{key:"render",value:function(){var e=this.state,a=e.success,t=e.error,n=e.timeRemaining,i=e.selectedFile,o=e.formattedSize,c=e.metadata,r=e.loading,s=e.currentStep,p=e.steps;return l.a.createElement("div",{className:"upload-wrapper"},l.a.createElement("div",{className:"upload-header"},l.a.createElement("h2",{className:"upload-header__title"},"Datapub Upload")),l.a.createElement("div",{className:"upload-area"},l.a.createElement("div",{className:"upload-area__drop"},l.a.createElement("input",{className:"upload-area__drop__input",type:"file",name:"file",onChange:this.onChangeHandler}),l.a.createElement("img",{className:"upload-area__drop__icon",src:v.a,alt:"upload-icon"}),l.a.createElement("span",{className:"upload-area__drop__text"},"Drag and drop your files",l.a.createElement("br",null),"or ",l.a.createElement("br",null),"click to select")),l.a.createElement("div",{className:"upload-area__info"},i&&l.a.createElement(l.a.Fragment,null,l.a.createElement("ul",{className:"upload-list"},l.a.createElement("li",{className:"list-item"},l.a.createElement("div",{className:"upload-list-item"},l.a.createElement("div",null,l.a.createElement("p",{className:"upload-file-name"},i.name),l.a.createElement("p",{className:"upload-file-size"},o)),l.a.createElement("div",null,l.a.createElement(S,{progress:Math.round(this.state.loaded),size:50,strokeWidth:5,circleOneStroke:"#d9edfe",circleTwoStroke:"#7ea9e1",timeRemaining:n}))))),l.a.createElement("h2",{className:"upload-message"},a&&"File upload success"),l.a.createElement("h2",{className:"upload-message"},t&&"Upload failed")))),l.a.createElement("div",{className:"upload-stepper"},l.a.createElement(N,{currentStep:s,steps:p,onChangeStep:this.onChangeStep})),l.a.createElement("div",{className:"upload-edit-area"},1===s&&l.a.createElement(M,{loading:r,uploadSuccess:a,selectedFile:i,metadata:c,handleSubmit:this.handleSubmitMetadata,handleChange:this.handleChangeMetadata}),2===s&&l.a.createElement(P,Object.assign({uploadSuccess:a},D))))}}]),t}(l.a.Component);T.defaultProps={config:{authToken:"be270cae-1c77-4853-b8c1-30b6cf5e9878",api:"http://localhost:9419",organizationId:"myorg",datasetId:"data-test-2"},scopes:{scopes:["obj:myorg/data-test-2/*:read,write"]},authzUrl:"http://localhost:5000/api/action/authz_authorize"};var D={schema:{fields:[{title:"",name:"name",type:"string",description:"",format:""},{title:"",name:"age",type:"integer",description:"",format:""},{title:"",name:"address",type:"string",description:"",format:""}]},data:[{name:"Eathan Pritchard",age:25,address:"1201 Tompkins Dr Madison"},{name:"Zidan Berg",age:22,address:"1309 Tompkins Dr Madison"},{name:"Raisa Kinney",age:32,address:"1497 Tompkins Dr Madison"},{name:"Cara Woodley",age:30,address:"1197  Buckeye Rd  Madison"},{name:"Komal Robbins",age:42,address:"1192  Buckeye Rd  Madison"},{name:"Deacon Childs",age:28,address:"1027 Tompkins Dr Madison"},{name:"Ayse Shaw",age:21,address:"1233 Buckeye Rd Madison"}]},_=T;var C=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(_,null))};o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(C,null)),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.8f511c64.chunk.js.map